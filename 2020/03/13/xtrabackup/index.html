<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>XtraBackup | Zachary&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="This article is about the procedure to hot backup and configure a replication of MySQL sever.The configuration servers are IP with 200 as master and 64 as slave; Preparation:It’s a good practice to ch">
<meta name="keywords" content="MySQL,Replication,SQL">
<meta property="og:type" content="article">
<meta property="og:title" content="XtraBackup">
<meta property="og:url" content="http://dontcry2013.github.io/blog/2020/03/13/xtrabackup/index.html">
<meta property="og:site_name" content="Zachary&#39;s blog">
<meta property="og:description" content="This article is about the procedure to hot backup and configure a replication of MySQL sever.The configuration servers are IP with 200 as master and 64 as slave; Preparation:It’s a good practice to ch">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2020-10-08T22:53:46.289Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="XtraBackup">
<meta name="twitter:description" content="This article is about the procedure to hot backup and configure a replication of MySQL sever.The configuration servers are IP with 200 as master and 64 as slave; Preparation:It’s a good practice to ch">
  
    <link rel="alternative" href="/atom.xml" title="Zachary&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/blog/img/favicon.png">
  
  <link rel="stylesheet" href="/blog/css/style.css">
  
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e907b20dbb2f8d2eb9402532629ec091";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>
</html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/blog/img/litten.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Zachary</a></h1>
		</hgroup>

		
		<p class="header-subtitle">No pain, no gain</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						<li>Links</li>
						
						
						<li>About</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/blog/">homepage</a></li>
				        
							<li><a href="/blog/archives">archives</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/dontcry2013" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/u/2278451152" title="weibo">weibo</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/blog/tags/android/" style="font-size: 14px;">Android</a> <a href="/blog/tags/apache/" style="font-size: 14px;">Apache</a> <a href="/blog/tags/basic/" style="font-size: 10px;">Basic</a> <a href="/blog/tags/c/" style="font-size: 14px;">C</a> <a href="/blog/tags/css/" style="font-size: 10px;">CSS</a> <a href="/blog/tags/centos/" style="font-size: 18px;">CentOS</a> <a href="/blog/tags/closure/" style="font-size: 10px;">Closure</a> <a href="/blog/tags/command/" style="font-size: 12px;">Command</a> <a href="/blog/tags/docker/" style="font-size: 16px;">Docker</a> <a href="/blog/tags/es2017/" style="font-size: 14px;">ES2017</a> <a href="/blog/tags/es5/" style="font-size: 18px;">ES5</a> <a href="/blog/tags/es6/" style="font-size: 18px;">ES6</a> <a href="/blog/tags/example/" style="font-size: 10px;">Example</a> <a href="/blog/tags/fiddler/" style="font-size: 10px;">Fiddler</a> <a href="/blog/tags/firewall/" style="font-size: 10px;">Firewall</a> <a href="/blog/tags/git/" style="font-size: 12px;">Git</a> <a href="/blog/tags/github/" style="font-size: 14px;">GitHub</a> <a href="/blog/tags/html/" style="font-size: 10px;">HTML</a> <a href="/blog/tags/http/" style="font-size: 10px;">HTTP</a> <a href="/blog/tags/hexo/" style="font-size: 12px;">Hexo</a> <a href="/blog/tags/hive/" style="font-size: 10px;">Hive</a> <a href="/blog/tags/issue/" style="font-size: 10px;">Issue</a> <a href="/blog/tags/jni/" style="font-size: 10px;">JNI</a> <a href="/blog/tags/java/" style="font-size: 14px;">Java</a> <a href="/blog/tags/kvm/" style="font-size: 10px;">KVM</a> <a href="/blog/tags/kylin/" style="font-size: 10px;">Kylin</a> <a href="/blog/tags/mandarin/" style="font-size: 16px;">Mandarin</a> <a href="/blog/tags/markdown/" style="font-size: 10px;">Markdown</a> <a href="/blog/tags/mongodb/" style="font-size: 10px;">MongoDB</a> <a href="/blog/tags/moodle/" style="font-size: 14px;">Moodle</a> <a href="/blog/tags/mysql/" style="font-size: 20px;">MySQL</a> <a href="/blog/tags/ndk/" style="font-size: 10px;">NDK</a> <a href="/blog/tags/nginx/" style="font-size: 14px;">Nginx</a> <a href="/blog/tags/node-js/" style="font-size: 14px;">Node.js</a> <a href="/blog/tags/objective-c/" style="font-size: 10px;">Objective-C</a> <a href="/blog/tags/oracle/" style="font-size: 12px;">Oracle</a> <a href="/blog/tags/php/" style="font-size: 12px;">PHP</a> <a href="/blog/tags/prototype/" style="font-size: 12px;">Prototype</a> <a href="/blog/tags/proxy/" style="font-size: 10px;">Proxy</a> <a href="/blog/tags/react-native/" style="font-size: 10px;">React Native</a> <a href="/blog/tags/replication/" style="font-size: 14px;">Replication</a> <a href="/blog/tags/selinux/" style="font-size: 12px;">SELinux</a> <a href="/blog/tags/sql/" style="font-size: 12px;">SQL</a> <a href="/blog/tags/shell/" style="font-size: 12px;">Shell</a> <a href="/blog/tags/sublime/" style="font-size: 10px;">Sublime</a> <a href="/blog/tags/symbolic-link/" style="font-size: 10px;">Symbolic Link</a> <a href="/blog/tags/todo/" style="font-size: 10px;">TODO</a> <a href="/blog/tags/travis/" style="font-size: 10px;">Travis</a> <a href="/blog/tags/tuning/" style="font-size: 12px;">Tuning</a> <a href="/blog/tags/ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/blog/tags/webview/" style="font-size: 10px;">Webview</a> <a href="/blog/tags/wordpress/" style="font-size: 10px;">Wordpress</a> <a href="/blog/tags/jquery/" style="font-size: 12px;">jQuery</a> <a href="/blog/tags/phpmyadmin/" style="font-size: 10px;">phpMyAdmin</a> <a href="/blog/tags/prototype/" style="font-size: 10px;">prototype</a> <a href="/blog/tags/碎碎念/" style="font-size: 20px;">碎碎念</a> <a href="/blog/tags/英语/" style="font-size: 10px;">英语</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.thirdtea.com/">三号茶馆</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.jianshu.com/users/c2f3ff613436/latest_articles">猫哥学前班</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Zachary</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="/blog/img/litten.png" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Zachary</h1>
			</hgroup>
			
			<p class="header-subtitle">No pain, no gain</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/blog/">homepage</a></li>
		        
					<li><a href="/blog/archives">archives</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/dontcry2013" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/u/2278451152" title="weibo">weibo</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-xtrabackup" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/blog/2020/03/13/xtrabackup/" class="article-date">
  	<time datetime="2020-03-13T05:30:36.000Z" itemprop="datePublished">2020-03-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      XtraBackup
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/mysql/">MySQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/replication/">Replication</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/sql/">SQL</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/blog/categories/database/">Database</a><a class="article-category-link" href="/blog/categories/database/shell/">Shell</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This article is about the procedure to hot backup and configure a replication of MySQL sever.<br>The configuration servers are IP with 200 as master and 64 as slave;</p>
<h1 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation:"></a>Preparation:</h1><p>It’s a good practice to check your work station first before you do anything, you have to know as more as possible including the hardware and system limitation, so that you can get a rough idea when encountered with a problem.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br><span class="line">cat /etc/centos-release</span><br><span class="line">lscpu</span><br><span class="line">ifconfig</span><br><span class="line">nmcli device status <span class="comment">#list network card</span></span><br><span class="line">TheMaster$ ping 192.168.86.64</span><br><span class="line">cat /etc/resolv.conf <span class="comment">#DNS</span></span><br><span class="line">cat /etc/sysconfig/network <span class="comment">#Gateway</span></span><br><span class="line">sestatus</span><br><span class="line">firewall-cmd --list-all</span><br><span class="line">sudo setenforce 0</span><br><span class="line"><span class="built_in">ulimit</span> -a <span class="comment"># Check system limitation of open files number</span></span><br><span class="line"><span class="built_in">ulimit</span> -n 2000000 <span class="comment"># Probably need to set open files limit</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="Master"><a href="#Master" class="headerlink" title="Master"></a>Master</h1><p>As we’re working on Database, disk space could be a much needed resource for some circumstances. Select the biggest disk space mount point.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df -h</span><br><span class="line">mkdir -p /aemg/zac_db_repl_dir</span><br></pre></td></tr></table></figure></p>
<p>Check if you got a available account.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p #Check you mysql account</span><br><span class="line">&gt; show grants;</span><br><span class="line">&gt; select @@datadir;</span><br></pre></td></tr></table></figure></p>
<p>If it is a new MySQL sever, we should set up the database with the default password, by doing so, issue below commands to change root password.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep &quot;temporary password&quot; /var/log/mysqld.log</span><br><span class="line">SET PASSWORD = PASSWORD(&apos;mynewpass&apos;)</span><br></pre></td></tr></table></figure></p>
<h2 id="Master-MySQL-Configure-File"><a href="#Master-MySQL-Configure-File" class="headerlink" title="Master MySQL Configure File"></a>Master MySQL Configure File</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">general_log = &apos;OFF&apos;</span><br><span class="line">general_log_file=/usr/log/general.log</span><br><span class="line">#bind-address = 0.0.0.0</span><br><span class="line">server-id=200</span><br><span class="line">log_bin=mysql-bin</span><br><span class="line">log_error=mysql-bin.err</span><br><span class="line">#binlog_do_db=moodle</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nohup xtrabackup --defaults-file=/etc/my.cnf --backup --user=root --password= --target-dir=/aemg/zac_db_repl_dir &amp;</span><br><span class="line">xtrabackup --defaults-file=/etc/my.cnf --user=root --password=  --prepare --target-dir=/aemg/zac_db_repl_dir</span><br></pre></td></tr></table></figure>
<p>you can also use <code>compress</code> option to get a faster progress.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xtrabackup --backup --compress --compress-threads=4 --target-dir=/data/compressed/</span><br><span class="line">xtrabackup --decompress --target-dir=/data/compressed/</span><br><span class="line">xtrabackup --prepare --target-dir=/data/compressed/</span><br><span class="line">`</span><br></pre></td></tr></table></figure></p>
<h1 id="Slave"><a href="#Slave" class="headerlink" title="Slave"></a>Slave</h1><p>Select the biggest disk space mount point.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@CC64 lib]# df -h</span><br><span class="line">devtmpfs                          24G     0   24G    0% /dev</span><br><span class="line">tmpfs                             24G     0   24G    0% /dev/shm</span><br><span class="line">tmpfs                             24G   25M   24G    1% /run</span><br><span class="line">tmpfs                             24G     0   24G    0% /sys/fs/cgroup</span><br><span class="line">/dev/mapper/centos-root           50G  3.9G   47G    8% /</span><br><span class="line">/dev/mapper/centos-home          1.1T   40M  1.1T    1% /home</span><br><span class="line">/dev/sda1                       1014M  174M  840M   18% /boot</span><br><span class="line">192.168.86.199:/aemg/moodledata  6.2T  1.6T  4.3T   28% /aemg/moodledata</span><br><span class="line">tmpfs                            4.7G     0  4.7G    0% /run/user/0</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /home/mysqldatadir</span><br><span class="line"></span><br><span class="line">ln -s /home/mysqldatadir /var/lib/mysql</span><br><span class="line"></span><br><span class="line">TheMaster$ rsync -avpP -e ssh /aemg/zac_db_repl_dir 192.168.86.64:/home/zac</span><br><span class="line"></span><br><span class="line">TheSlave$ mv /home/mysqldatadir/* /home/mysqldatadir_bak</span><br><span class="line"></span><br><span class="line">TheSlave$ xtrabackup --move-back --target-dir=/home/zac/zac_db_repl_dir</span><br></pre></td></tr></table></figure>
<p>If you don’t want to use any of the above options, you can additionally use rsync or cp to restore the files.<br>The datadir must be empty before restoring the backup. Also it’s important to note that MySQL server needs to be shut down.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">TheSlave$ chown -R mysql:mysql /home/mysqldatadir</span><br><span class="line"></span><br><span class="line">TheSlave$ systemctl restart mysqld</span><br><span class="line"></span><br><span class="line">TheMaster|mysql&gt; CREATE USER &apos;repl&apos;@&apos;%&apos; IDENTIFIED BY &apos;password&apos;;</span><br><span class="line"></span><br><span class="line">TheMaster|mysql&gt; GRANT REPLICATION SLAVE ON *.*  TO &apos;repl&apos;@&apos;%&apos; IDENTIFIED BY &apos;password&apos;;</span><br></pre></td></tr></table></figure>
<p>login in master to test</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">TheSlave$ cat /var/lib/mysql/xtrabackup_binlog_info</span><br><span class="line"></span><br><span class="line">TheSlave|mysql&gt; CHANGE MASTER TO</span><br><span class="line">                MASTER_HOST=&apos;$masterip&apos;,</span><br><span class="line">                MASTER_USER=&apos;repl&apos;,</span><br><span class="line">                MASTER_PASSWORD=&apos;$slavepass&apos;,</span><br><span class="line">                MASTER_LOG_FILE=&apos;TheMaster-bin.000001&apos;,</span><br><span class="line">                MASTER_LOG_POS=481;</span><br><span class="line">TheSlave|mysql&gt; START SLAVE;</span><br><span class="line"></span><br><span class="line">TheSlave|mysql&gt; SHOW SLAVE STATUS \G</span><br></pre></td></tr></table></figure>
<h1 id="Problems"><a href="#Problems" class="headerlink" title="Problems"></a>Problems</h1><h2 id="File-Descriptor-Limitation"><a href="#File-Descriptor-Limitation" class="headerlink" title="File Descriptor Limitation"></a>File Descriptor Limitation</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">InnoDB: Operating system error number 24 in a file operation.</span><br><span class="line">InnoDB: Error number 24 means &apos;Too many open files&apos;</span><br><span class="line">InnoDB: Some operating system error numbers are described at http://dev.mysql.com/doc/refman/5.7/en/operating-system-error-codes.html</span><br><span class="line">InnoDB: File ./zf2tutorial/aemg_table_bangong_jiangli.ibd: &apos;open&apos; returned OS error 124. Cannot continue operation</span><br><span class="line">InnoDB: Cannot continue operation.</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/fs/nr_open</span><br><span class="line"></span><br><span class="line">find /aemg/data/ -name &quot;*.ibd&quot; | wc -l</span><br><span class="line">1508</span><br><span class="line">need to add another 1000</span><br><span class="line"></span><br><span class="line">cat /proc/sys/fs/file-max</span><br><span class="line"></span><br><span class="line">sysctl -w fs.file-max=21339338 </span><br><span class="line"></span><br><span class="line">echo &quot;fs.file-max=21339338&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">sysctl -w fs.nr_open=2000000</span><br><span class="line"></span><br><span class="line">echo &quot;fs.nr_open=2000000&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">ulimit -n 2000000 </span><br><span class="line"></span><br><span class="line">ulimit -a</span><br></pre></td></tr></table></figure>
<p><a href="https://www.percona.com/blog/2016/12/28/using-percona-xtrabackup-mysql-instance-large-number-tables/" target="_blank" rel="noopener">https://www.percona.com/blog/2016/12/28/using-percona-xtrabackup-mysql-instance-large-number-tables/</a></p>
<h2 id="File-Exists"><a href="#File-Exists" class="headerlink" title="File Exists"></a>File Exists</h2><p>xtrabackup: Can’t create/write to file ‘trabackup_logfile’ (Errcode: 17 - File exists)</p>
<p>Just delete it.</p>
<h2 id="Warning-InnoDB-Table-mysql-innodb-index-stats-has-length-mismatch-in-the-column-name-table-name-Please-run-mysql-upgrade"><a href="#Warning-InnoDB-Table-mysql-innodb-index-stats-has-length-mismatch-in-the-column-name-table-name-Please-run-mysql-upgrade" class="headerlink" title="[Warning] InnoDB: Table mysql/innodb_index_stats has length mismatch in the column name table_name.  Please run mysql_upgrade"></a>[Warning] InnoDB: Table mysql/innodb_index_stats has length mismatch in the column name table_name.  Please run mysql_upgrade</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysqlcheck -uroot  -p --all-databases --check-upgrade --auto-repair</span><br><span class="line">mysql_upgrade -uroot -p </span><br><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure>
      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2020/03/17/web-server-problem-detect-procedure/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          Web Server Problem Detect Procedure
        
      </div>
    </a>
  
  
    <a href="/blog/2020/03/12/yum-repo/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Yum Repository</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
    <a class="jiathis_button_twitter"></a>
    <a class="jiathis_button_plus"></a> 
    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="xtrabackup" data-title="XtraBackup" data-url="http://dontcry2013.github.io/blog/blog/2020/03/13/xtrabackup/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2020 Zachary
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/blog/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>